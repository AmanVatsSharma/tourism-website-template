---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { loadJSON } from '../../utils/dataLoader';
import { getWhatsAppUrl } from '../../utils/whatsapp';
import { useTranslation } from '../../utils/translations';

let itinerary: any = null;
try {
  itinerary = await loadJSON('itinerary_5day.json');
} catch (error) {
  console.error('[Hindi PackagesPage] Error:', error);
}

const t = useTranslation('hi');
---

<BaseLayout
  title={t('packages.header.h1', 'टूर पैकेज')}
  description="आदि कैलाश टूर पैकेज 2025"
  locale="hi"
  pageName="packages"
  faqSchema={true}
>
  <section class="section bg-gradient-to-br from-blue-50 to-white">
    <div class="container-custom">
      <h1 class="section-heading font-hindi">
        {t('packages.header.h1', 'आदि कैलाश टूर पैकेज 2025')}
      </h1>

      {itinerary && (
        <div class="package-card bg-white rounded-2xl shadow-xl p-6 md:p-8 lg:p-10 mb-8 border border-gray-100">
          <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 border-b pb-4">
            <div>
              <h2 class="text-2xl md:text-3xl font-bold text-primary-600 mb-2 font-hindi">
                {itinerary.package_name}
              </h2>
              <div class="flex flex-wrap gap-3 text-sm text-gray-600">
                <span class="badge badge-primary">
                  {itinerary.duration.days} दिन / {itinerary.duration.nights} रातें
                </span>
                <span class="badge badge-secondary">
                  {itinerary.difficulty}
                </span>
                <span class="badge badge-accent">
                  अधिकतम ऊंचाई: {itinerary.max_altitude.meters}m
                </span>
              </div>
            </div>

            <div class="mt-4 md:mt-0 text-right">
              <div class="text-3xl font-bold text-green-600">
                ₹{itinerary.price_range.min_inr.toLocaleString()} - ₹{itinerary.price_range.max_inr.toLocaleString()}
              </div>
              <p class="text-sm text-gray-600 font-hindi">प्रति व्यक्ति</p>
            </div>
          </div>

          <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mb-8 text-center md:text-left">
            <div>
              <div class="text-sm text-gray-600 mb-1 font-hindi">शुरुआती बिंदु</div>
              <div class="font-semibold text-lg text-secondary-800">{itinerary.starting_point}</div>
            </div>
            <div>
              <div class="text-sm text-gray-600 mb-1 font-hindi">अंतिम बिंदु</div>
              <div class="font-semibold text-lg text-secondary-800">{itinerary.ending_point}</div>
            </div>
            <div>
              <div class="text-sm text-gray-600 mb-1 font-hindi">सबसे अच्छा समय</div>
              <div class="font-semibold text-lg text-secondary-800">
                मई-जून, सितंबर-अक्टूबर
              </div>
            </div>
          </div>

          <h3 class="text-2xl font-bold text-secondary-800 mb-6 font-hindi">दिन-प्रतिदिन यात्रा कार्यक्रम</h3>
          <div class="space-y-4">
            {itinerary.itinerary.map((day: any) => (
              <details class="group bg-gray-50 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300">
                <summary class="cursor-pointer font-semibold text-lg text-secondary-700 hover:text-primary-600 transition-colors flex justify-between items-center font-hindi">
                  <span>दिन {day.day}: {day.title}</span>
                  <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </summary>
                <div class="mt-4 pl-4 border-l-2 border-primary-200 text-gray-700 font-hindi">
                  <p class="mb-2"><strong>ऊंचाई:</strong> {day.end_altitude_m}m</p>
                  <p class="mb-2"><strong>मार्ग:</strong> {day.route}</p>
                  <p class="mb-2"><strong>गतिविधियाँ:</strong></p>
                  <ul class="list-disc pl-5 space-y-1">
                    {day.activities.map((activity: string) => (
                      <li>{activity}</li>
                    ))}
                  </ul>
                  <p class="mt-2"><strong>आवास:</strong> {day.accommodation}</p>
                  <p class="mt-2"><strong>भोजन:</strong> {day.meals.join(', ')}</p>
                </div>
              </details>
            ))}
          </div>

          <div class="mt-10 text-center">
            <a
              href={getWhatsAppUrl({ packageInterest: itinerary.package_name })}
              class="btn-primary text-lg px-8 py-4"
            >
              व्हाट्सएप के माध्यम से बुक करें
            </a>
          </div>
        </div>
      )}
    </div>
  </section>
</BaseLayout>

<style>
  .font-hindi {
    font-family: 'Noto Sans Devanagari', sans-serif;
  }
</style>

